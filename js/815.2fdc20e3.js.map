{"version":3,"file":"js/815.2fdc20e3.js","mappings":"8rBAwCA,MAAMA,EAAQC,EAERC,EAAiBC,IACrBH,EAAM,aAAcG,EAAMC,OAAOC,MAAM,E,kGCxCzC,MAAMC,EAAc,EAEpB,Q,ogBCqEA,MAAMC,GAAYC,EAAAA,EAAAA,IAAI,IAChBC,GAAeD,EAAAA,EAAAA,IAAI,IACnBE,GAAUF,EAAAA,EAAAA,KAAI,GACdG,GAASH,EAAAA,EAAAA,IAAI,IACbI,GAAgBJ,EAAAA,EAAAA,IAAI,SAEpBK,GAASC,EAAAA,EAAAA,MAETC,GAAYP,EAAAA,EAAAA,KAAI,GAEhBQ,EAAgBC,UACpBF,EAAUV,OAAQ,QAGZa,EAAAA,EAAAA,IAA+BC,EAAAA,EAAMZ,EAAUF,MAAOI,EAAaJ,OACtEe,MAAK,KACJD,EAAAA,EAAKE,aAAe,QACpBF,EAAAA,EAAKG,mBAAqB,CACxBC,IAAK,kDAGPC,EAAAA,EAAAA,IAAsBL,EAAAA,EAAKM,YAAaN,EAAAA,EAAKG,oBAAoBF,MAAK,KACpEb,EAAUF,MAAQ,GAClBI,EAAaJ,MAAQ,EAAE,IAEzBK,EAAQL,OAAQ,EAChBM,EAAON,MAAQ,mBAAmB,IAEnCqB,OAAMC,IAEL,OADAjB,EAAQL,OAAQ,EACRsB,EAAMC,SACZ,IAAK,+CACHjB,EAAON,MAAQ,QACf,MACF,QACEM,EAAON,MAAQ,OACf,MACJ,IAGJU,EAAUV,OAAQ,EAClBwB,GAAW,EAGPC,EAAQb,UACZF,EAAUV,OAAQ,QACZ0B,EAAAA,EAAAA,IAA2BZ,EAAAA,EAAMZ,EAAUF,MAAOI,EAAaJ,OAClEe,MAAK,KACJb,EAAUF,MAAQ,GAClBI,EAAaJ,MAAQ,GACrBK,EAAQL,OAAQ,EAChBM,EAAON,MAAQ,MAAM,IAEtBqB,OAAMC,IAEL,OADAjB,EAAQL,OAAQ,EACRsB,EAAMC,SACZ,IAAK,wCACHjB,EAAON,MAAQ,OACf,MACF,IAAK,2CACHM,EAAON,MAAQ,OACf,MACF,QACEM,EAAON,MAAQ,WACf,MACJ,IAGJU,EAAUV,OAAQ,CAAK,EAGnB2B,EAAcf,UAClB,MAAMgB,EAAiB,IAAIC,EAAAA,SACrBC,EAAAA,EAAAA,IAAgBhB,EAAAA,EAAMc,GACzBb,MAAMgB,IACL1B,EAAQL,OAAQ,EAChBM,EAAON,MAAQ,OACf,MAAMgC,EAAaH,EAAAA,GAAmBI,qBAAqBF,GAC3DG,QAAQC,IAAIH,EAAW,IAExBX,OAAMC,IACLjB,EAAQL,OAAQ,EAChBM,EAAON,MAAQ,OACfkC,QAAQC,IAAIb,EAAM,IAGtBE,GAAW,EAGPY,EAAcxB,UAClB,MAAMgB,EAAiB,IAAIS,EAAAA,SACrBP,EAAAA,EAAAA,IAAgBhB,EAAAA,EAAMc,GACzBb,MAAMgB,IACL1B,EAAQL,OAAQ,EAChBM,EAAON,MAAQ,OACf,MAAMgC,EAAaK,EAAAA,GAAmBJ,qBAAqBF,GAC3DG,QAAQC,IAAIH,EAAW,IAExBX,OAAMC,IACLjB,EAAQL,OAAQ,EAChBM,EAAON,MAAQ,OACfkC,QAAQC,IAAIb,EAAM,IAGtBE,GAAW,EAGPc,EAAWA,KACf9B,EAAO+B,KAAK,CACVC,KAAM,kBACN,EAGEhB,EAAYA,KAChB,MAAMiB,EAAYC,SAASC,eAAe,aACpCC,EAAQ,IAAIC,EAAAA,MAAMJ,GACxBG,EAAME,MAAM,EAGRC,EAAaC,IACjB9C,EAAUF,MAAQ,GAClBI,EAAaJ,MAAQ,GACrBO,EAAcP,MAAQgD,CAAM,E,kqCC9L9B,MAAM,GAA2B,OAAgB,EAAQ,CAAC,CAAC,YAAY,qBAEvE,O","sources":["webpack://vue_firebase_auth/./src/components/CurrentStatus.vue","webpack://vue_firebase_auth/./src/components/CurrentStatus.vue?3fa6","webpack://vue_firebase_auth/./src/pages/loginPage.vue","webpack://vue_firebase_auth/./src/pages/loginPage.vue?2ee9"],"sourcesContent":["<template>\r\n  <div\r\n    class=\"btn-group mb-3\"\r\n    role=\"group\"\r\n    @change=\"currentActive\"\r\n    >\r\n    <input\r\n      type=\"radio\"\r\n      class=\"btn-check\"\r\n      name=\"btnradio\"\r\n      id=\"login\"\r\n      checked\r\n      value=\"login\"\r\n    >\r\n    <label\r\n      class=\"btn btn-outline-primary\"\r\n      for=\"login\"\r\n    >\r\n      登入\r\n    </label>\r\n\r\n    <input\r\n      type=\"radio\"\r\n      class=\"btn-check\"\r\n      name=\"btnradio\"\r\n      id=\"signin\"\r\n      value=\"signin\"\r\n    >\r\n    <label\r\n      class=\"btn btn-outline-primary\"\r\n      for=\"signin\"\r\n    >\r\n      註冊\r\n    </label>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { defineEmits } from 'vue'\r\n\r\nconst emits = defineEmits(['sendStatus'])\r\n\r\nconst currentActive = (event) => {\r\n  emits('sendStatus', event.target.value)\r\n}\r\n</script>","import script from \"./CurrentStatus.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./CurrentStatus.vue?vue&type=script&setup=true&lang=js\"\n\nconst __exports__ = script;\n\nexport default __exports__","<template>\r\n  <LoadingPlugins :is-loading=\"isLoading\"/>\r\n  <div class=\"card user_info\">\r\n    <CurrentStatus\r\n      @sendStatus=\"setStatus\"\r\n    />\r\n    <div class=\"card-body px-0 py-0\">\r\n      <form>\r\n        <div class=\"mb-3\">\r\n          <label for=\"email\" class=\"form-label\">電子信箱</label>\r\n          <input v-model=\"userEmail\" type=\"email\" class=\"form-control\" id=\"email\">\r\n        </div>\r\n        <div class=\"mb-2\">\r\n          <label for=\"password\" class=\"form-label\">密碼</label>\r\n          <input v-model=\"userPassword\" type=\"password\" class=\"form-control\" id=\"password\">\r\n        </div>\r\n        <a\r\n          href=\"#\"\r\n          class=\"d-block text-decoration-none text-end\"\r\n          @click.prevent=\"updatePW\"\r\n          v-if=\"currentStatus === 'login'\"\r\n        >\r\n          忘記密碼?\r\n        </a>\r\n        <div class=\"text-center my-3 otherLoginMethod d-flex align-items-center justify-content-center\">OR</div>\r\n        <div class=\"text-center mb-4\">\r\n          <i class=\"bi bi-google me-3\" @click=\"googleLogin\"></i>\r\n          <i class=\"bi bi-github\" @click=\"githubLogin\"></i>\r\n        </div>\r\n        <div class=\"d-grid gap-2\">\r\n          <button\r\n            v-if=\"currentStatus === 'login'\"\r\n            type=\"button\"\r\n            class=\"btn btn-primary d-block\"\r\n            @click=\"login\"\r\n          >\r\n            登入\r\n          </button>\r\n          <button\r\n            v-else\r\n            type=\"button\"\r\n            class=\"btn btn-primary\"\r\n            @click=\"createAccount\"\r\n          >\r\n            註冊\r\n          </button>\r\n        </div>\r\n      </form>\r\n    </div>\r\n  </div>\r\n  <!-- Toast -->\r\n  <MsgToast\r\n    :isError=\"isError\"\r\n    :repMsg=\"repMsg\"\r\n  />\r\n</template>\r\n\r\n<script setup>\r\nimport { ref } from 'vue'\r\nimport { auth } from '@/firebase'\r\nimport {\r\n  createUserWithEmailAndPassword, // 用email創立新帳號\r\n  signInWithEmailAndPassword,     // 用email帳號登入\r\n  sendEmailVerification,          // 註冊會員後，發送驗證信，點開連結才能開通\r\n  GoogleAuthProvider,\r\n  signInWithPopup,\r\n  GithubAuthProvider\r\n} from 'firebase/auth'\r\nimport { Toast } from 'bootstrap/dist/js/bootstrap'\r\nimport CurrentStatus from '../components/CurrentStatus.vue'\r\nimport LoadingPlugins from '../components/LoadingPlugins.vue'\r\nimport MsgToast from '../components/MsgToast.vue'\r\nimport { useRouter } from 'vue-router'\r\n\r\nconst userEmail = ref('')\r\nconst userPassword = ref('')\r\nconst isError = ref(false)\r\nconst repMsg = ref('')\r\nconst currentStatus = ref('login')\r\n\r\nconst router = useRouter()\r\n\r\nconst isLoading = ref(false)\r\n\r\nconst createAccount = async () => {\r\n  isLoading.value = true\r\n  // 建立帳號\r\n  // 在 auth.ActionCodeSettings.url 加上 ?email=${auth.currentUser.email} 導頁後會將使用者信箱帶上\r\n  await createUserWithEmailAndPassword(auth, userEmail.value, userPassword.value)\r\n    .then(() => {\r\n      auth.languageCode = 'zh-TW',\r\n      auth.ActionCodeSettings = {\r\n        url: `${process.env.NODE_ENV === 'production' ? 'https://iian0910.github.io/vue-firebase-auth/' : 'http://localhost:8080/'}`\r\n      }\r\n      // 發送驗證信到指定信箱\r\n      sendEmailVerification(auth.currentUser, auth.ActionCodeSettings).then(() => {\r\n        userEmail.value = ''\r\n        userPassword.value = ''\r\n      })\r\n      isError.value = false\r\n      repMsg.value = '註冊成功，請到指定信箱點擊驗證連結'\r\n    })\r\n    .catch(error => {\r\n      isError.value = true\r\n      switch (error.message) {\r\n        case 'Firebase: Error (auth/email-already-in-use).':\r\n          repMsg.value = '帳號已註冊'\r\n          break;\r\n        default:\r\n          repMsg.value = '註冊失敗'\r\n          break;\r\n      }\r\n    })\r\n  \r\n  isLoading.value = false\r\n  openToast()\r\n}\r\n\r\nconst login = async () => {\r\n  isLoading.value = true\r\n  await signInWithEmailAndPassword(auth, userEmail.value, userPassword.value)\r\n    .then(() => {\r\n      userEmail.value = ''\r\n      userPassword.value = ''\r\n      isError.value = false\r\n      repMsg.value = '登入成功'\r\n    })\r\n    .catch(error => {\r\n      isError.value = true\r\n      switch (error.message) {\r\n        case 'Firebase: Error (auth/invalid-email).':\r\n          repMsg.value = '帳號有誤';\r\n          break;\r\n        case 'Firebase: Error (auth/missing-password).':\r\n          repMsg.value = '密碼有誤';\r\n          break;\r\n        default:\r\n          repMsg.value = '帳號或密碼不存在';\r\n          break;\r\n      }\r\n    })\r\n    \r\n  isLoading.value = false\r\n}\r\n\r\nconst googleLogin = async () => {\r\n  const providerGoogle = new GoogleAuthProvider()\r\n  await signInWithPopup(auth, providerGoogle)\r\n    .then((result) => {\r\n      isError.value = false\r\n      repMsg.value = '登入成功'\r\n      const credential = GoogleAuthProvider.credentialFromResult(result)\r\n      console.log(credential)\r\n    })\r\n    .catch(error => {\r\n      isError.value = true\r\n      repMsg.value = '登入失敗'\r\n      console.log(error)\r\n    })\r\n\r\n  openToast()\r\n}\r\n\r\nconst githubLogin = async () => {\r\n  const providerGoogle = new GithubAuthProvider()\r\n  await signInWithPopup(auth, providerGoogle)\r\n    .then((result) => {\r\n      isError.value = false\r\n      repMsg.value = '登入成功'\r\n      const credential = GithubAuthProvider.credentialFromResult(result)\r\n      console.log(credential)\r\n    })\r\n    .catch(error => {\r\n      isError.value = true\r\n      repMsg.value = '登入失敗'\r\n      console.log(error)\r\n    })\r\n\r\n  openToast()\r\n}\r\n\r\nconst updatePW = () => {\r\n  router.push({\r\n    path: '/resetPassword',\r\n  })\r\n}\r\n\r\nconst openToast = () => {\r\n  const toastLive = document.getElementById('liveToast')\r\n  const toast = new Toast(toastLive)\r\n  toast.show()\r\n}\r\n\r\nconst setStatus = (status) => {\r\n  userEmail.value = ''\r\n  userPassword.value = ''\r\n  currentStatus.value = status\r\n}\r\n\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.user_info {\r\n  width: 300px;\r\n  padding: 20px;\r\n  position: absolute;\r\n  top: 50%;\r\n  left: 50%;\r\n  transform: translate(-50%, -50%);\r\n}\r\n.bi{\r\n  cursor: pointer;\r\n  &::before {\r\n    font-size: 25px;\r\n    color: rgb(38, 90, 150);\r\n    &:hover {\r\n      color: rgb(66, 123, 187);\r\n    }\r\n  }\r\n  &:hover{\r\n    &::before {\r\n      color: rgb(66, 123, 187);\r\n    }\r\n  }\r\n}\r\n.otherLoginMethod{\r\n  color: rgb(38, 90, 150);\r\n  font-weight: bold;\r\n  &::before,\r\n  &::after {\r\n    content: '';\r\n    width: 100%;\r\n    height: 1px;\r\n    display: block;\r\n    background: rgb(38, 90, 150);\r\n  }\r\n  &::before {\r\n    margin-right: 10px;\r\n  }\r\n  &::after {\r\n    margin-left: 10px;\r\n  }\r\n}\r\n</style>","import script from \"./loginPage.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./loginPage.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./loginPage.vue?vue&type=style&index=0&id=139b47f8&lang=scss&scoped=true\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-139b47f8\"]])\n\nexport default __exports__"],"names":["emits","__emit","currentActive","event","target","value","__exports__","userEmail","ref","userPassword","isError","repMsg","currentStatus","router","useRouter","isLoading","createAccount","async","createUserWithEmailAndPassword","auth","then","languageCode","ActionCodeSettings","url","sendEmailVerification","currentUser","catch","error","message","openToast","login","signInWithEmailAndPassword","googleLogin","providerGoogle","GoogleAuthProvider","signInWithPopup","result","credential","credentialFromResult","console","log","githubLogin","GithubAuthProvider","updatePW","push","path","toastLive","document","getElementById","toast","Toast","show","setStatus","status"],"sourceRoot":""}